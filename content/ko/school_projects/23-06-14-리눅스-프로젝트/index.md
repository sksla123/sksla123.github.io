---
title: 카페 키오스크 만들기
subtitle: 리눅스 팀 프로젝트 - 키오스크 만들기
date: 2023-06-14
image:
  focal_point: 'center'
---

이 프로젝트는 카페 키오스크 시스템을 구현하여 사용자들이 메뉴를 선택하고 결제할 수 있도록 다중 클라이언트와 서버 간 통신을 통한 주문 및 결제 프로세스를 제공하는 프로그램입니다.

<!--more-->

1. 프로그램 컨셉
저희 12조의 프로젝트는 카페 키오스크 시스템을 모티브로 했습니다. 카페에서 키오스크로 메뉴와 다양한 옵션을 선택해 주문하는 과정을 구현하여 소비자의 주문을 효율적으로 처리하는 시스템을 개발하였습니다.

2. 프로그램 사용법
2.1 서버 사용법
터미널에서 gcc 명령어로 컴파일한 후 다음과 같이 실행합니다:

./KIOSK_server [[서버이름]] [[DB 파일 이름]]

DB 파일이 존재하지 않으면 자동으로 파일을 생성하고, 존재한다면 해당 파일을 엽니다.
서버가 준비되면 소켓 통신을 시작하며, 서버 종료 시 Ctrl+\로 종료하고, Ctrl+C로 제품 수정을 할 수 있습니다.
2.2 클라이언트 사용법
터미널에서 gcc로 컴파일한 후 다음과 같이 실행합니다:

./KIOSK_client [[클라이언트 이름]]

클라이언트는 "Press any key to start" 메시지를 출력하며 사용자의 입력을 대기합니다.
입력이 들어오면 서버에서 카테고리 정보를 요청하여 해당 정보를 출력합니다.

3. 기본 기능
3.1 서버 기능
다중 클라이언트 접속: 서버와 클라이언트가 연결될 때마다 fork() 함수를 사용하여 자식 프로세스를 연결합니다.
상품 수량 관리: 판매 가능한 수량이 다 팔리면 sold out 메시지를 출력합니다.
상품 수량과 소비자 요구 수량 비교: 소비자가 요청한 수량이 부족하면 구매가 불가능합니다.
상품 총액과 소비자 입력 금액 비교: 소비자가 입력한 금액이 부족하면 구매가 불가능합니다.
3.2 클라이언트 기능
원하는 카테고리에 접근하여 상품을 선택하고 구매 및 결제를 진행할 수 있습니다.
구매할 상품을 선택 후 카트에 담을지 또는 메뉴로 돌아갈지 선택할 수 있습니다.

4. 통신 프로토콜
다음은 클라이언트와 서버 간의 통신 프로토콜입니다:
4.1 통신 시작 및 종료

0번 프로토콜: 클라이언트와 서버의 이름 교환
클라이언트: connection|start|[[client name]]|EOF
서버: connection|start|[[server name]]|EOF
1번 프로토콜: 통신 종료
클라이언트: connection|end|EOF
서버: connection|end|EOF
4.2 카테고리 및 상품 정보 요청
2번 프로토콜: 카테고리 정보를 요청하는 통신
클라이언트: category|?|EOF
서버: category|[[number of categories]]|[[[name of categories]]]*|EOF
3번 프로토콜: 특정 카테고리 내 상품 정보를 요청하는 통신
클라이언트: category|[[category name]]|?|EOF
서버: category|[[category name]]|[[number of products in this category]]|[ID|[[product id]]|NAME|[[product name]]|]*EOF
4.3 기타 통신
4번 프로토콜: 특정 ID의 상품 상세 정보를 요청
5번 프로토콜: 해당 상품의 옵션 정보를 요청
6번 프로토콜: 카트 결제 요청
7번 프로토콜: DB 프로토콜, 클라이언트와 서버 간의 데이터 동기화 요청

5. 추가 기능
입력 에러 관리: 잘못된 입력, 규약 미준수, DB 수정 중의 통신 요청 등의 경우 오류를 처리합니다.
이진 파일 DB 구성: 파일 스크립터를 통해 DB를 이진 파일 형식으로 구성합니다.
클라이언트 입력 시간 제한: 120초 동안 입력이 없으면 클라이언트가 자동으로 재시작되고 카트는 비워집니다.
메뉴 설명 출력: 메뉴 선택 시 해당 메뉴의 설명, 가격, 남은 수량 등을 출력합니다.
옵션 선택 기능: 서버에서 옵션이 추가된 메뉴일 경우, 추가 옵션을 선택할 수 있습니다.
실시간 카트 업데이트: 카트 내용이 실시간으로 출력되며, 사용자가 카트 내용을 확인할 수 있도록 구현하였습니다.
